<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NextStep.AI - Custom AI prep</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/nextstepai_main.css') }}">
</head>
<body>
<div class="app-shell custom-shell">
    <header>
        <div class="brand">NextStep.<span>AI</span></div>
        <nav>
            <a href="{{ url_for('index') }}">Practice</a>
            <a href="{{ url_for('jobs') }}">Job library</a>
            <a href="{{ url_for('custom_prep') }}" class="active">Custom AI prep</a>
        </nav>
    </header>

    <div class="custom-layout">
        <!-- Left: form -->
        <section class="card">
            <h1>Custom AI prep</h1>
            <p class="subtitle">
                Share the role and company you are targeting and NextStep.AI will generate a tailored interview prep report.
            </p>

            {% if error %}
                <p class="error">{{ error }}</p>
            {% endif %}

            {% if report and report.error %}
                <p class="error">{{ report.error }}</p>
            {% endif %}

            <form method="POST" style="margin-top:1rem;">
                <div class="field">
                    <label for="job_title">Job position (required)</label><br>
                    <input type="text" id="job_title" name="job_title"
                           placeholder="Software Engineer Intern, Data Analyst..." required>
                </div>

                <div class="field">
                    <label for="company_name">Company name (optional)</label><br>
                    <input type="text" id="company_name" name="company_name"
                           placeholder="Google, Amazon, Spotify...">
                </div>

                <div class="field">
                    <label for="job_description">Job description (optional)</label><br>
                    <textarea id="job_description" name="job_description"
                              placeholder="Paste the job description here if you have it."></textarea>
                </div>

                <div class="field">
                    <label for="resume">Your resume or key experience (optional)</label><br>
                    <textarea id="resume" name="resume"
                              placeholder="Paste your resume text or summarize your background."></textarea>
                </div>

                <button type="submit">Generate prep report</button>
            </form>
        </section>

        <!-- Right: report -->
        <section class="card">
            {% if report %}
                <h2>
                    Prep report for {{ report.job_title }}
                    {% if report.company_name %} at {{ report.company_name }}{% endif %}
                </h2>

                {% if report.company_summary %}
                    <div class="section-card">
                        <h3 class="section-title">Company summary</h3>
                        <p>{{ report.company_summary }}</p>
                    </div>
                {% endif %}

                <div class="section-card question-list">
                    <h3 class="section-title">Role focused questions</h3>
                    {% if report.role_questions %}
                        <ol>
                            {% for q in report.role_questions %}
                                <li>
                                    <strong>{{ q.question }}</strong>
                                    {% if q.guidance %}
                                        <div class="question-guidance">{{ q.guidance }}</div>
                                    {% endif %}
                                </li>
                            {% endfor %}
                        </ol>
                    {% else %}
                        <p>No role questions generated.</p>
                    {% endif %}
                </div>

                {% if report.role_tips %}
                    <div class="section-card">
                        <h3 class="section-title">General interview tips for this role</h3>
                        <ul>
                            {% for tip in report.role_tips %}
                                <li>{{ tip }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}

                {% if report.company_behavioral_questions %}
                    <div class="section-card question-list">
                        <h3 class="section-title">
                            Behavioral questions tailored to {{ report.company_name }}
                        </h3>
                        <ol>
                            {% for q in report.company_behavioral_questions %}
                                <li>
                                    <strong>{{ q.question }}</strong>
                                    {% if q.guidance %}
                                        <div class="question-guidance">{{ q.guidance }}</div>
                                    {% endif %}
                                </li>
                            {% endfor %}
                        </ol>
                    </div>
                {% endif %}

                {% if report.company_values_questions %}
                    <div class="section-card question-list">
                        <h3 class="section-title">Questions around company values and culture</h3>
                        <ol>
                            {% for q in report.company_values_questions %}
                                <li>
                                    <strong>{{ q.question }}</strong>
                                    {% if q.guidance %}
                                        <div class="question-guidance">{{ q.guidance }}</div>
                                    {% endif %}
                                </li>
                            {% endfor %}
                        </ol>
                    </div>
                {% endif %}

                {% if report.company_role_questions %}
                    <div class="section-card question-list">
                        <h3 class="section-title">
                            Questions specific to the job{% if report.company_name %} at {{ report.company_name }}{% endif %}
                        </h3>
                        <ol>
                            {% for q in report.company_role_questions %}
                                <li>
                                    <strong>{{ q.question }}</strong>
                                    {% if q.guidance %}
                                        <div class="question-guidance">{{ q.guidance }}</div>
                                    {% endif %}
                                </li>
                            {% endfor %}
                        </ol>
                    </div>
                {% endif %}

                {% if report.how_to_impress %}
                    <div class="section-card">
                        <h3 class="section-title">How to impress them</h3>
                        <ul>
                            {% for item in report.how_to_impress %}
                                <li>{{ item }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}

                {% if report.talking_points %}
                    <div class="section-card">
                        <h3 class="section-title">Talking points to sound well prepared</h3>
                        <ul>
                            {% for item in report.talking_points %}
                                <li>{{ item }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}

                {% if report.next_steps %}
                    <div class="section-card">
                        <h3 class="section-title">Next steps to prepare</h3>
                        <ul>
                            {% for step in report.next_steps %}
                                <li>{{ step }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}
            {% else %}
                <h2>No report yet</h2>
                <p class="subtitle">
                    Fill the form on the left and NextStep.AI will generate a custom prep plan.
                </p>
            {% endif %}
        </section>
    </div>
</div>
</body>
</html>
